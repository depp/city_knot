<html>
<head>
    <title>Delta</title>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <!--
    <script src="src/synth_common.js"></script>
    <script src="src/effects.js"></script>
    <script src="src/fm_synth.js"></script>
    <script src="src/synths.js"></script>
    <script src="src/sequencer.js"></script>
    <script src="src/spanish_romance.js"></script>

    <script type="text/javascript">
    var context;
    var mondrianSocket;
    var sequencer;
    var instruments;
    var mondrian;
    var midiInstrument;
    var effect;

    function playSong() {
        window.console.log("js play song");
        context = new AudioContext();
        context.resume();
        sequencer = new Sequencer(context);
        instr = new PolySynth(context, {
            synth: horn(context),
            numVoices: 4,
        });
        instr.connect(context.destination);
        duration = Math.max(...SpanishRomance.map(e => e[0] + e[2])) / 1000;
        events = SpanishRomance.map(e =>  {
                  return {
                    time: e[0] / 1000,
                    callback: t => {
                      instr.trigger(e[1], 0.1, t);
                      instr.release(e[1], t + e[2] / 1000);
                    },
                };
        });
        tempi = [{time: 0, bpm: 120}];
        pattern = { events, tempi, duration };
        sequencer.cueUp(pattern);
        sequencer.startLoop();
    }


    </script>
    -->
</head>

<body marginheight="0" marginwidth="0" bgcolor="black" id="body">
<div class="control" style="position: absolute; color: white">
    Route
    <select id="routecam">
        <option selected>0</option>
        <option>3</option>
        <option>6</option>
        <option>9</option>
    </select>

    Scene
    <select id="theme">
        <optgroup label="outside">
            <option>night-outside</option>
            <option>sketch-outside</option>
            <option>wireframe-outside</option>
        </optgroup>
        <optgroup label="inside">
            <option>gol-inside</option>
            <option>gol2-inside</option>
        </optgroup>

        <optgroup label="camera movements">
            <option>wireframe-orbit</option>
            <option>night-orbit</option>
        </optgroup>

        <optgroup label="proposed script">
            <option>night-orbit</option>
            <option>night-outside</option>
            <option>gol-inside</option>
            <option>fractal-inside</option>
            <option>wireframe-outside</option>
            <option>gol2-inside</option>
            <option>sketch-outside</option>
            <option>unknown-finale</option>
        </optgroup>

        <optgroup label="backup (mostly inside)">
            <option>finale</option>
            <option>plasma-inside</option>
            <option>fractal-inside</option>
            <option>wireframe-inside</option>
            <option>wireframe-inside-hexagon</option>
            <option>wireframe-inside-varying-width</option>
        </optgroup>
    </select>

    Scene Time <tt id="clock"></tt>
    <tt id="status"></tt>
    <br>
    <audio controls id='soundtrack' src="sound.ogg" preload="true"></audio>
    <br>
    <pre>
 development:   manual scene
 manual-camera: manual scene + camera
 demo:          scene synced to music</pre>
    <select id="mode">
        <option>development</option>
        <option>manual-camera</option>
        <option>demo</option>
    </select>
</div>

<div class="control" style="position: absolute; color: white; top:0; right:0">
    <button id="music">Play Midi Music</button>
    <div id="stats"></div>
</div>

<canvas id="webgl-canvas" style="border: none; cursor:crosshair; width:100%; height: 100%"></canvas>
<script defer src="delta.dart.js"></script>

</body>

</html>
